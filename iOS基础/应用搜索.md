## 应用搜索

应用搜索 提供了新方式以搜索某个应用内的公开信息，即使设备尚未安装。如果已安装该应用可以通过deep-link打开，如果未安装可以引导用户到网页。

任何内容都可通过苹果的服务器索引。设备上的本地内容只能在本地搜索使用，当同样的检索发生在多个设备，内容将被发送苹果服务器，并建立索引以供更多设备使用。

三种将内容提供给应用搜索的方式：

* NSUserActivity
* Core Spotlight 将应用相关内容添加到设备上的索引，并支持应用deep-link
* Web标记让网页内容可被检索。

### 1. NSUserActivity

可在本地索引中添加应用状态。

* keywords 可用于链接关键词
* eligibleForSearch 标识数据可用于本地搜索
* eligibleForPublicIndexing 标识数据可用于在苹果服务器上的公开搜索，因此可用于跨设备检索。

注意：

1. 提供充足关键词，但误滥用。搜索可能是本地运行的，多个关键词不仅会降低排名，也会降低搜索速度。
2. userInfo 属性可用于存储与活动相关的自定义属性。数据存储在应用之外，建立索引时会被序列化，打开搜索结果时会反序列化，数据越多，耗时越长。

### 2. Core Spotlight

可以提供对应用内容的索引，以及管理设备中的索引，也可以让应用参与到搜索中来，内容可以是由应用提供，或者用户生成的。

### 3. Web 标记

苹果推出的网络爬虫工具 Applebot，会检索网页寻找元标签，为Spotlight和Siri搜索使用的公共索引提供数据。




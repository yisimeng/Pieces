# 音频格式

**采样率**是指：声音信号在“模 —> 数”转换过程中单位时间内采样的次数，单位：kbps(k bit per second)。

**采样值**是指：每一次采样周期内声音模拟信号的积分值。

**单声道**的音频文件采样数据为8bit的短整数（short int）

**双声道**的音频文件采样数据为16bit的整数（int）,其中高八位为左声道，低八位为右声道。

## PCM

PCM(Pulse Code Modulation)也被称为 脉码编码调制。PCM中的声音数据没有被压缩，如果是单声道的文件，采样数据按时间的先后顺序依次存入。

PCM16LE的取值范围是（-32768~32767），PCM8的取值是（0~255） PCM16LE双声道数据16bit的采样位数转换为8bit，需要经过两个步骤：
1. 将（-32768~32767）转换为（-128~127）的8bit有符号值。
2. 将（-128~127）转换为（0~255）的8bit无符号值。

## WAVE

WAVE文件是一种RIFF格式的文件。其基本块名称是“WAVE”，其中包含了两个子块“fmt”和“data”。从编程的角度简单说来就是由WAVE_HEADER、WAVE_FMT、WAVE_DATA、采样数据共4个部分组成。

WAVE格式是windows下最常见的音频格式（扩展名为.wav）,实质就是在PCM文件前加上了一个文件头。
```
typedef struct WAVE_HEADER{
    char fccID[4];
    unsigned long dwSize;
    char fccType[4];
}WAVE_HEADER;

typedef struct WAVE_FMT{
    char  fccID[4];
    unsigned long dwSize;
    unsigned short wFormatTag;
    unsigned short wChannels;
    unsigned long dwSamplesPerSec;
    unsigned long dwAvgBytesPerSec;
    unsigned short wBlockAlign;
    unsigned short uiBitsPerSample;
}WAVE_FMT;

typedef struct WAVE_DATA{
    char       fccID[4];
    unsigned long dwSize;
}WAVE_DATA; 
```

# 投光物

**投光物**将光投射到物体的光源。

**定向光** 光的位置向量可以定义为 vec3，如果定义为 vec4 时，应将 w 分量设置为 1.0，才能正常使用变换和投影。

**位置光源** 光的方向向量定义为 vec4 时，方向不应受位移干扰，所以应将 w 分量设置为 0.0。

**点光源** 出于世界某一位置的光源，朝着所有发现发光，但是光线也会随着距离逐渐衰减。例如：火把、灯泡、蜡烛。

**衰减** 随着传播距离的增长，光的强度逐渐衰减。

```
/** 
* 衰减值
* K1：常数项，通常保持1.0，保证分母永远比1大。
* K2：一次项，与距离相乘，以线性方式减少强度。
* K3：二次项，与距离的平方相乘，以二次递减的方式减少强度。
*/
F = 1.0 / (K1 + K2 * d + K3 * d * d)
```

**聚光** 环境中某个位置只朝特定方向照射光线。例如：手电筒。OpenGL中用一个**位置**、一个**方向**和一个**切光角**表示的。切光角就是最边缘的光到方向的夹角，指定了聚光的半径。

通过**片段指向光源**的向量与光的**方向**向量的**点积**得出夹角的余弦值，如果小于切光角的余弦值，则证明在光照范围之外，否则在光照范围之内。（如果对比夹角大小的话，需要在片段内对向量点积进行反余弦计算，开销很大）

**平滑/软化边缘** 软化聚光的边缘，使其更加近似于真实效果。需要再添加一个外圆锥，在内到外圆锥之间光强度逐渐减少。

```
/**
* 聚光强度
* θ 切光角
* ϕ 内圆锥
* γ 外圆锥
* ϵ 内圆锥与外圆锥之间的余弦值差（ϵ=ϕ−γ）
*/ 
I = (θ - γ) / ϵ 
```






























爱的魔法+潮流腰包
洋葱面具+潮流腰包

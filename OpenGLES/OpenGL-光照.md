# 光照

**冯氏光照模型**主要由三个分量组成：环境，漫反射，镜面光照。

**全局照明**算法：光能够在其他物体表面进行反射，对物体产生间接的影响，算法开销高昂且复杂。

**环境光照**：简化的全局照明，用光的颜色乘以很小的常量因子，来模拟环境光照。

**漫反射光照**是物体上与光线方向越接近的片段，能从光源处获得更多的亮度。光线与法向量夹角越大，光对片段颜色影响越小。

法向量是一个方向向量，不能表达特定位置，没有齐次坐标（顶点位置中的w分量），位移不应该影响到法向量。移除位移对于法向量的影响：

* 法向量乘以模型矩阵左上角3x3矩阵
* 将法向量w分量设置为0，乘以模型矩阵。

**法线矩阵**（模型矩阵左上角的逆矩阵的转置矩阵）当物体进行不等比缩放时，法向量就不会再垂直于对应表面，通过法线矩阵来移除对法向量错误缩放的影响。开销较大，应该在CPU中计算，通过uniform传递给着色器。

**镜面光照**通过反射法向量周围光的方向来计算反射向量，反射向量和视线方向的夹角越小，镜面光的影响越大。
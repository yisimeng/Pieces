# 变换 Transformations

## 向量乘法

### 点乘

点乘是将对应分量逐个相乘，再把所得的积相加。

### 叉乘

在3D空间中需要两个不平行的向量作为输入，生成一个正交与两个向量的第三个向量。


## 矩阵

### 矩阵的加减

矩阵间的加减就是对应元素的加减运算，只有在相同索引下的元素才能进行运算。

### 矩阵相乘

矩阵相乘的限制：

1. 只有矩阵A的列与矩阵B的行相等，才能相乘。
2. 不遵守**交换律**，A·B≠B·A。

### 单位矩阵

除了对角线以外都是0的N×N的矩阵。任何矩阵乘以单位矩阵不变。

| 1 0 0 0 |   | x |   | x |
| 0 1 0 0 | · | y | = | y |
| 0 0 1 0 |   | z |   | z |
| 0 0 0 1 |   | 1 |   | 1 |

### 向量缩放

将单位矩阵的对角线上的1替换为n，那么这个向量乘完之后的结果就是把向量缩放了n倍。

| n 0 0 0 |   | x |   | n * x |
| 0 n 0 0 | · | y | = | n * x |
| 0 0 n 0 |   | z |   | n * x |
| 0 0 0 1 |   | 1 |   |   1   |

### 向量位移

| 1 0 0 Tx |   | x |   | x + Tx |
| 0 1 0 Ty | · | y | = | y + Ty |
| 0 0 1 Tz |   | z |   | z + Tz |
| 0 0 0 1  |   | 1 |   |   1    |

**齐次坐标** 4x4矩阵中的w分量称为齐次坐标。使用齐次坐标，可以在3D向量上进行位移。如果向量的齐次坐标是0，这个坐标就是**方向向量**。

### 旋转

* 弧度->角度：角度 = 弧度 * （180.0f / PI）
* 角度->弧度：弧度 = 角度 * （PI / 180.0f）

在3D空间中旋转需要一个**角**和一个**旋转轴**。

沿x轴旋转：

| 1   0      0    0 |   | x |   |            x            |
| 0 (cosθ) (sinθ) 0 | · | y | = | (cosθ) * y - (sinθ) * z |
| 0 (sinθ) (cosθ) 0 |   | z |   | (sinθ) * y + (cosθ) * z |
| 0   0      0    1 |   | 1 |   |   		     1            |

沿y轴旋转：

| (cosθ) 0 (sinθ) 0 |   | x |   | (cosθ) * x + (sinθ) * z |
|   0    1   0    0 | · | y | = |            y            |
|-(sinθ) 0 (cosθ) 0 |   | z |   |-(sinθ) * x + (cosθ) * z |
|   0    0   0    1 |   | 1 |   |   	        1            |

沿z轴旋转：

| (cosθ) -(sinθ) 0 0 |   | x |   | (cosθ) * x + (sinθ) * y |
| (sinθ)  (cosθ) 0 0 | · | y | = | (sinθ) * x + (cosθ) * y |
|   0       0    0 0 |   | z |   |            z            |
|   0       0    0 1 |   | 1 |   |   	      1            |


### 矩阵的组合

假设向量（x,y,z），希望缩放2倍，然后位移（1,2,3）个单位，最终组合的矩阵是：

| 1 0 0 1 |   | 2 0 0 0 |   | 2 0 0 1 |
| 0 1 0 2 | · | 0 2 0 0 | = | 0 2 0 2 |
| 0 0 1 3 |   | 0 0 2 1 |   | 0 0 2 3 |
| 0 0 0 1 |   | 0 0 0 1 |   | 0 0 0 1 |

使用组合的矩阵乘以向量：

| 2 0 0 1 |   | x |   | 2x + 1 |
| 0 2 0 2 | · | y | = | 2y + 2 |
| 0 0 2 3 |   | z |   | 3z + 3 |
| 0 0 0 1 |   | 1 |   |    1   |























